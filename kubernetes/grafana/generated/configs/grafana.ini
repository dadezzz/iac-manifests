[server]
domain = grafana.zarantonello.net
enforce_domain = true
root_url = https://grafana.zarantonello.net

[security]
cookie_secure = true

[auth]
disable_login_form = true

[auth.generic_oauth]
allow_assign_grafana_admin = true
api_url = https://auth.zarantonello.dev/api/oidc/userinfo
auth_url = https://auth.zarantonello.dev/api/oidc/authorization
client_id = $__env{OAUTH_CLIENT_ID}
client_secret = $__env{OAUTH_CLIENT_SECRET}
enabled = true
name = Authelia
role_attribute_path = contains(groups[*], 'admin') && 'GrafanaAdmin'
role_attribute_strict = true
scopes = openid email profile groups
token_url = https://auth.zarantonello.dev/api/oidc/token
use_pkce = true

[smtp]
enabled = true
from_address = grafana@zarantonello.net
host = smtp.purelymail.com:465
password = $__env{SMTP_PASSWORD}
user = $__env{SMTP_USER}

[log]
level = info
mode = console
